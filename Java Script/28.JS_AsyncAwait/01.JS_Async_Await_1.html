<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Async/Await in JS</title>
    <style>
        table {
            width: 70%;
            margin: 50px auto;
            border-collapse: collapse;
            font-size: 20px;
            ;
        }

        td,
        th {
            border: 1px solid black;
        }

        tr {
            height: 45px;
        }
    </style>
</head>

<body>
    <nav>
        <h2>Java Script | ES 7 | Async & Await</h2>
    </nav>
    <div>
        <table>
            <thead>
                <tr>
                    <th>A/C No</th>
                    <th>Name</th>
                    <th>Balance</th>
                </tr>
            </thead>
            <tbody id="accounts-body"></tbody>
        </table>
    </div>
    <script>
        let accounts = [
            { acno: 1000123, name: 'Sunil Joseph', bal: 25000 },
            { acno: 1000124, name: 'Harsha Vardhan', bal: 25500 }
        ]

        function addAccount(account) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    accounts.push(account)
                    let isAdded = true
                    if (isAdded)
                        resolve('Record Inserted')
                    else
                        reject('Insertion Failed')
                }, 3000);
            })
        }



        let displayAccounts = () => {
            let acRows = ''
            for (let acc of accounts) {
                acRows += `<tr>
                 <td>${acc.acno}</td>
                 <td>${acc.name}</td>
                 <td>${acc.bal}</td>
                `
            }
            document.querySelector('#accounts-body').innerHTML = acRows
        }



        let new_ac = { acno: 1000125, name: 'Naveen', bal: 50000 }

        async function operations() {
            await addAccount(new_ac) //takes 3 seconds time
            displayAccounts()
        }

        operations()
    </script>
</body>

</html>